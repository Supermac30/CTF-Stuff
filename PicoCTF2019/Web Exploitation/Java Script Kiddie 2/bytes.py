"""
    Prints out all possible inputs that results in a png with the header contained in the header array
    Trying each of them leads to one that works: 80802090204020407030306000408060
"""
def shift(shifts):
    """Shifts the bytes by the amounts in the array shifts."""
    f = open("bytes.txt", "r")
    png = f.readline().split()
    f.close()
    fixed = [None]*len(png)
    for i in range(16):
        for j in range(len(png)//16):
            shift = shifts[i]
            fixed[j*16+i] = png[(((j+shift)*16)%len(png))+i]
    #print(" ".join(fixed))
    return fixed

def put(num, ind, arr):
    """Puts a value in a location in a the png by trying each possible input."""
    out = shift(arr)
    while out[ind] != str(num):
        arr[ind%16] += 1
        arr[ind%16] %= 10
        out = shift(arr)
    return arr, out

def check(header, out):
    """Does a check to ensure that the output is valid."""
    for i in range(len(header)):
        if header[i] > 0:
            if header[i] != int(out[i]):
                return False
    return True

header = [137, 80, 78, 71, 13, 10, 26, 10, 0, 0, 0, 13, 73, 72, 68, 82, 0, 0, -1, -1, 0, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0, 0, -1, -1, 73, 68, 65, 84]
arr = [0] * 16
out = []
c=1
tried = []
while True:
    for i in range(len(header)):
        if (header[i] == -1):
            continue
        arr, out = put(header[i], i, arr)
    string = ""
    for i in range(len(arr)):
        if arr[i] < 10:
            string += str(arr[i])+"0"
    arr = [(num+c)%100 for num in arr]
    # checks if the output has been printed before
    if string in tried:
        arr = [(num+1)%100 for num in arr]
        c+=1
    else:
        if check(header, out):
            tried.append(string)
            print(string)

